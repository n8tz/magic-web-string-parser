(()=>{var t={700:t=>{t.exports={walknSetExport:function(t,e,r){var n,a,i=e.split("/"),o=t;for(n=0;n<i.length-1;)o=o[i[n]]=o[i[n]]||{},n++;a=1===Object.keys(r).length&&r.default||r,o[i[n]]?(o[i[n]].__esModule||Object.assign(a,o[i[n]]),o[i[n]]=a):o[i[n]]=a}}},577:(t,e,r)=>{"use strict";r.r(e),r.d(e,{parse:()=>f,priority:()=>y,stringify:()=>c});const n=require("base64-js");var a=r.n(n),i=r(73),o=r.n(i),s=new TextDecoder("UTF-8"),u=new TextEncoder("UTF-8"),l=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,p=/^(data\:(([^;,]+\/[^;,]+\;)?(base64)?\,)?)(([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?)$/i,y=0;function c(t,e,r){if("Base64"===t.type)return(t.dataHeader||"")+a().fromByteArray(u.encode(r(t.childs[0],e)))}function f(t,e){var r=t.data;if(!t.notBase64&&o().string(r)){var n={type:"Base64",childs:[],data:r,length:r.length},i=r.match(p);if(null!=i&&i[1]&&(r=i[5],n.dataHeader=i[1]),!(!l.test(r)||!n.dataHeader&&r.length<=12)){try{var y=a().toByteArray(r);if(a().fromByteArray(u.encode(s.decode(y)))!==r)return!1;n.childs.push({notBase64:!0,data:s.decode(y)})}catch(t){return!1}return n}}}},224:(t,e,r)=>{"use strict";r.r(e),r.d(e,{parse:()=>u,priority:()=>o,stringify:()=>s});var n=r(73),a=r.n(n),i={}.__proto__,o=10;function s(t,e,r){var n,a={__proto__:null};if(t.newRawValue)try{n=!!t.newRawValue&&JSON.parse(t.newRawValue)}catch(e){console.log("stringify::Json","raw value parse error",t.newRawValue)}return"Json"===t.type?a=t.newValue||JSON.stringify(void 0!==n?n:s(t.childs[0],e,r)):t.type===(t.prefix||"")+"Array"?a=n||t.childs.map((function(t){return s(t,e,r)})):"Prop"===t.type?a=n||t.newValue||s(t.childs[0],e,r):t.type===(t.prefix||"")+"Object"?(a={},t.newValue?a=t.newValue:n?a=n:t.childs.forEach((function(t){return a[t.key]=s(t.childs[0],e,r)}))):a=n||r(t,e),a}function u(t,e,r,n){var o=t.data,s=t.prefix,l=void 0===s?"Json":s,p={type:l,childs:[]};try{var y;if(Array.isArray(o))y=o;else if(o.__proto__===i)y=o;else{if(!a().string(o))return!1;y=JSON.parse(o),n=!1,p.data=o}if(Array.isArray(y))p.childs.push({type:l+"Array",prefix:l,childs:y.map((function(t){return a().string(t)?{data:t}:u({prefix:l,data:t},e,r,!0)}))});else{if(y.__proto__!==i)return!1;p.childs.push({type:l+"Object",prefix:l,data:a().string(o)?o:JSON.stringify(o),childs:Object.keys(y).map((function(t){return{type:"Prop",key:t,childs:[a().string(y[t])?{data:y[t]}:u({prefix:l,data:y[t]},e,r,!0)]}}))})}return n?p.childs[0]:p}catch(t){return!1}}},741:(t,e,r)=>{"use strict";r.r(e),r.d(e,{parse:()=>u,priority:()=>o,stringify:()=>s}),r(104);var n=r(73),a=r.n(n);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=0;function s(t,e,r){var n,a=t.childs;return"MultiLines"===t.type?n=a.map((function(t){return s(t,e,r)})).join("\r"+(t.csrf?"\n":"")):"Line"===t.type&&(n=a.map((function(t){return r(t,e)})).join("")),n}function u(t,e,r){var n,o=t.data,s={type:"MultiLines",childs:[]};if(a().string(o)){s.csrf=o.includes("\r\n");try{var u,l=o.split(/[\r\n]/);if(l.length<=1)return;(u=s.childs).push.apply(u,function(t){if(Array.isArray(t))return i(t)}(n=l.map((function(t){return{type:"Line",childs:[{data:t}]}})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}catch(t){return!1}return s}}},696:(t,e,r)=>{"use strict";r.r(e),r.d(e,{parse:()=>p,priority:()=>u,stringify:()=>l});var n=r(73),a=r.n(n),i=r(104),o=r.n(i),s=/^\??[^\?\/\=\&]+(\=[^\=\&]+)(\&[^=\&]+(\=[^=\&]+)?)*/gi,u=11;function l(t,e,r){if("Qs"===t.type){var n=r(t.childs[0],e,"Json");return(t.prefix||"")+o().stringify(n)}return""}function p(t,e,r){var n=t.data,i={type:"Qs",childs:[]};if(!a().string(n)||!s.test(n)||/[\n\r]/gi.test(n))return!1;n.startsWith("?")&&(i.prefix="?",n=n.substr(1));try{var u=o().parse(n,{allowPrototypes:!0});return i.childs.push(r.Json.parse({data:u,prefix:"Qs"},e,r,!0)),i}catch(t){return!1}}},941:(t,e,r)=>{"use strict";r.r(e),r.d(e,{parse:()=>l,priority:()=>s,stringify:()=>u});var n=r(73),a=r.n(n),i=r(104),o=r.n(i),s=8;function u(t,e,r){var n,a=t.childs;return"UrlPath"===t.type?n=a.map((function(t){return u(t,e,r)})).join(""):"PathQuery"===t.type?n=t.newValue?"?"+t.newValue:"?"+r(a[0],e):"PathHash"===t.type?n=t.newValue?"#"+t.newValue:"#"+r(a[0],e):"Path"===t.type?n=t.newValue?t.newValue:"/"+a.map((function(t){return u(t,e,r)})).join("/"):"PathItem"===t.type&&(n=t.newRawValue?t.newRawValue:o().stringify({value:t.newValue||r(a[0],e)}).split("value=")[1]),n}function l(t,e,r){var n,i,s=t.data,u={type:"UrlPath",childs:[]};if(a().string(s)&&s&&"/"===s[0]&&!/[\n\r]/gi.test(s)){i=s.split("#"),s=i.shift(),i=i.join("#"),u.withHashParam=!!i,n=s.split("?"),s=n.shift(),n=n.join("?"),u.withQueryParam=!!n;try{var l=s.split("/");l.shift(),l.length&&u.childs.push({type:"Path",data:s,childs:l.map((function(t){return{type:"PathItem",data:t,childs:[{data:o().parse("value="+t).value}]}}))}),n&&u.childs.push({type:"PathQuery",data:n,childs:[{data:n}]}),i&&u.childs.push({type:"PathHash",data:i,childs:[{data:i}]})}catch(t){return!1}return u}}},73:t=>{"use strict";t.exports=require("is")},104:t=>{"use strict";t.exports=require("qs")}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{parse:()=>v,stringify:()=>g});var t={},e=r(700).walknSetExport;e(t,"Qs",r(696)),e(t,"Json",r(224)),e(t,"Base64",r(577)),e(t,"UrlPath",r(941)),e(t,"MultiLines",r(741));const a=t,i=require("hash.js");var o=r.n(i);const s=require("jsonpath-plus");var u=r(73),l=r.n(u);function p(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function y(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=["String","Number","Boolean","Null","undefined"],d={get:function(t){var e=(0,s.JSONPath)({path:t,json:this.jsonPathRoot}),r=[];return e.forEach((function(t){t=Array.isArray(t)?t[0]:t,r.push(t)})),r},set:function(t,e,r,n){var a=this,i=(0,s.JSONPath)({path:t,json:this.jsonPathRoot}),o=[],u=[];return i.forEach((function(t){var r,n;null!==(r=t=Array.isArray(t)?t[0]:t)&&void 0!==r&&r.__path&&(null!==(n=t)&&void 0!==n&&n.key?t.key=e:t.data=e,o.push(a.nodesByPath[t.__path]))})),o.forEach((function(t){var i;null!=t&&t.key?(i=t.key,t.key=e):n?t.newRawValue=e:t.newValue=e,r&&(u.push(g(a)),null!=t&&t.key?t.key=i:(delete t.newValue,delete t.newRawValue))})),r?u:g(this)},printStats:function(){for(var t="",e=0,r=Object.keys(this.nodesByType);e<r.length;e++){var n=r[e];t+=n+Array(15-n.length).join(" ")+": "+this.nodesByType[n].length+" items\n"}return t},printVars:function(){for(var t,e=[""],r=[this.root];r.length;)(t=r.shift()).isPropValueOf&&e.push(t.isPropValueOf+Array(15-t.isPropValueOf.length).join(" ")+"= "+(t.newRawValue||JSON.stringify(t.newValue||t.data))),t.childs&&r.unshift.apply(r,y(t.childs));return e.join("\n")},printVarTree:function(){for(var t,e="",r=[this.root];r.length;)(t=r.shift()).isPropValueOf||(e+=t.path.split(".").map((function(t){return" "})).join("")+t.pathKey+(t.key?" "+t.key+" = ":"")+"\n"),(t.data||t.newValue||t.newRawValue)&&(e+=t.path.split(".").map((function(t){return" "})).join("")+" - "+(t.newRawValue||JSON.stringify(t.newValue||t.data))+"\n"),t.childs&&r.unshift.apply(r,y(t.childs));return e}};function v(t,e){var r,n,i,s,u=Object.keys(a).sort((function(t,e){return a[e].priority-a[t].priority})),c={data:t,childs:[]},f={__path:"$"},v={__proto__:d,root:c,jsonPathRoot:f,nodesByPath:{},nodesByType:{}},g=[c],w=[f],m=[];do{if(r=g.shift(),n=w.shift(),!r.type){var _,b=p(u);try{for(b.s();!(_=b.n()).done;){var j=_.value;if(s=a[j].parse(r,e,a)){Object.assign(r,s),r.type=j;break}}}catch(t){b.e(t)}finally{b.f()}}r.type||(r.type=l().string(r.data)?"String":l().number(r.data)?"Number":l().bool(r.data)?"Boolean":null===r.data?"Null":(r.data,"undefined")),"Prop"===r.type?(m.push(r.key),r.childs[0].isPropValueOf=r.key):m.push(r.type),r.isPropValueOf&&(n.key=r.isPropValueOf,n.value=[i={__path:n.__path+".value",__key:"value",__type:r.type,value:h.includes(r.type)?r.data:void 0,isLeaf:!!h.includes(r.type)}]),r.isPropValueOf||(n[r.type]=n[r.type]||[],n[r.type].push(i={__path:n.__path+"."+r.type+"["+n[r.type].length+"]",__key:r.type+"["+n[r.type].length+"]",__type:r.type,isLeaf:!!h.includes(r.type)})),i.data=r.data,r.path=i.__path,r.pathKey=i.__key,v.nodesByPath[i.__path]=r,v.nodesByType[r.type]=v.nodesByType[r.type]||[],v.nodesByType[r.type].push(r),r.childs&&(g.unshift.apply(g,y(r.childs)),w.unshift.apply(w,y(r.childs.map((function(t,e){return i})))))}while(g.length);return v.structureHash=o().sha256().update(m.join(",")).digest("hex"),v}function g(t,e){return w(t.root||t,e)}function w(t,e,r){var n,i="";return t.newValue?i=t.newValue:h.includes(t.type)?i=t.data:a[r||t.type]?(n=a[r||t.type].stringify(t,e,w))&&(i=n):(console.log("Unknown what to do with ",t,r),process.exit(1)),i}})(),module.exports=n})();